!function(e){e.fn.mauGallery=function(t){var n=e.extend(e.fn.mauGallery.defaults,t),o=[];return this.each(function(){e.fn.mauGallery.methods.createRowWrapper(e(this)),n.lightBox&&e.fn.mauGallery.methods.createLightBox(e(this),n.lightboxId,n.navigation),e.fn.mauGallery.listeners(n),e(this).children(".gallery-item").each(function(t){e.fn.mauGallery.methods.responsiveImageItem(e(this)),e.fn.mauGallery.methods.moveItemInRowWrapper(e(this)),e.fn.mauGallery.methods.wrapItemInColumn(e(this),n.columns);var a=e(this).data("gallery-tag");n.showTags&&void 0!==a&&-1===o.indexOf(a)&&o.push(a)}),n.showTags&&e.fn.mauGallery.methods.showItemTags(e(this),n.tagsPosition,o),e(this).fadeIn(500)})},e.fn.mauGallery.defaults={columns:3,lightBox:!0,lightboxId:null,showTags:!0,tagsPosition:"bottom",navigation:!0},e.fn.mauGallery.listeners=function(t){e(".gallery-item").on("click",function(){t.lightBox&&"IMG"===e(this).prop("tagName")?e.fn.mauGallery.methods.openLightBox(e(this),t.lightboxId):null}),e(".gallery").on("click",".nav-link",e.fn.mauGallery.methods.filterByTag),e(".gallery").on("click",".mg-prev",function(){return e.fn.mauGallery.methods.prevImage(t.lightboxId)}),e(".gallery").on("click",".mg-next",function(){return e.fn.mauGallery.methods.nextImage(t.lightboxId)})},e.fn.mauGallery.methods={createRowWrapper:function(t){t.children().first().hasClass("row")||t.append('<div class="gallery-items-row row"></div>')},wrapItemInColumn:function(t,n){if(Number===n.constructor)t.wrap("<div class='item-column mb-4 col-".concat(Math.ceil(12/n),"'></div>"));else if(Object===n.constructor){var o="";n.xs&&(o+=" col-".concat(Math.ceil(12/n.xs))),n.sm&&(o+=" col-sm-".concat(Math.ceil(12/n.sm))),n.md&&(o+=" col-md-".concat(Math.ceil(12/n.md))),n.lg&&(o+=" col-lg-".concat(Math.ceil(12/n.lg))),n.xl&&(o+=" col-xl-".concat(Math.ceil(12/n.xl))),t.wrap("<div class='item-column mb-4".concat(o,"'></div>"))}else console.error("Columns should be defined as numbers or objects. ".concat(typeof n," is not supported."))},moveItemInRowWrapper:function(t){t.appendTo(".gallery-items-row")},responsiveImageItem:function(t){"IMG"===t.prop("tagName")&&t.addClass("img-fluid")},openLightBox:function(t,n){e("#".concat(n)).find(".lightboxImage").attr("src",t.attr("src")),e("#".concat(n)).modal("toggle")},prevImage:function(){var t=null;e("img.gallery-item").each(function(){e(this).attr("src")===e(".lightboxImage").attr("src")&&(t=e(this))});var n=e(".tags-bar span.active-tag").data("images-toggle"),o=[];"all"===n?e(".item-column").each(function(){e(this).children("img").length&&o.push(e(this).children("img"))}):e(".item-column").each(function(){e(this).children("img").data("gallery-tag")===n&&o.push(e(this).children("img"))});var a=0,r=null;return e(o).each(function(e){return t.attr("src")===this.attr("src")?(a=e-1,!1):void 0}),r=o[a]||o[o.length-1],e(".lightboxImage").attr("src",r.attr("src"))},nextImage:function(){var t=null;e("img.gallery-item").each(function(){e(this).attr("src")===e(".lightboxImage").attr("src")&&(t=e(this))});var n=e(".tags-bar span.active-tag").data("images-toggle"),o=[];"all"===n?e(".item-column").each(function(){e(this).children("img").length&&o.push(e(this).children("img"))}):e(".item-column").each(function(){e(this).children("img").data("gallery-tag")===n&&o.push(e(this).children("img"))});var a=0,r=null;return e(o).each(function(e){return t.attr("src")===this.attr("src")?(a=e+1,!1):void 0}),r=o[a]||o[0],e(".lightboxImage").attr("src",r.attr("src"))},createLightBox:function(t,n,o){t.append('<div class="modal fade" id="'.concat(n?n:"galleryLightbox",'" tabindex="-1" role="dialog" aria-hidden="true">\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n                        <div class="modal-body">\n                            ').concat(o?'<div class="mg-prev" style="cursor:pointer;position:absolute;top:50%;left:-15px;background:white;"><</div>':'<span style="display:none;" />','\n                            <img class="lightboxImage img-fluid" alt="Contenu de l\'image affichÃ©e dans la modale au clique"/>\n                            ').concat(o?'<div class="mg-next" style="cursor:pointer;position:absolute;top:50%;right:-15px;background:white;}">></div>':'<span style="display:none;" />','\n                        </div>\n                    </div>\n                </div>\n            </div>'))},showItemTags:function(t,n,o){for(var a='<li class="nav-item"><span class="nav-link active active-tag"  data-images-toggle="all">Tous</span></li>',r=0;r<o.length;r++)a+='<li class="nav-item active">\n                <span class="nav-link"  data-images-toggle="'.concat(o[r],'">').concat(o[r],"</span></li>");var i='<ul class="my-4 tags-bar nav nav-pills">'.concat(a,"</ul>");"bottom"===n?t.append(i):"top"===n?t.prepend(i):console.error("Unknown tags position: ".concat(n))},filterByTag:function(){if(e(this).hasClass("active-tag"))return;e(".active-tag").removeClass("active active-tag"),e(this).addClass("active-tag");var t=e(this).data("images-toggle");e(".gallery-item").each(function(){e(this).parents(".item-column").hide(),"all"===t?e(this).parents(".item-column").show(300):e(this).data("gallery-tag")===t&&e(this).parents(".item-column").show(300)})}}}(jQuery);
